<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gráficos de Visitación</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f9f9f9;
        }

        .navbar {
            background-color: #003366;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
        }

        .container {
            padding: 20px;
        }

        h2 {
            text-align: center;
            color: #003366;
        }

        canvas {
            display: block;
            margin: 0 auto;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <!-- Barra de navegación -->
    <div class="navbar">
        <div class="logo">Sistema Unificado</div>
    </div>

    <!-- Contenedor principal -->
    <div class="container">
        <h2>Gráficos de Visitación</h2>

        <!-- Gráfico de sectores -->
        <canvas id="sectorChart" width="400" height="400"></canvas>
    </div>

    <script>
        // Datos de ejemplo
        const categorias = ["Categoría A", "Categoría B", "Categoría C", "Categoría D"];
        const meses = ["Enero", "Febrero", "Marzo", "Abril"];
        const datos = {
            "Enero": [30, 20, 50, 40],
            "Febrero": [40, 30, 20, 10],
            "Marzo": [25, 35, 15, 25],
            "Abril": [20, 40, 30, 10],
        };

        // Convertir datos a porcentajes para el gráfico
        const calcularPorcentajes = (mes) => {
            const total = datos[mes].reduce((a, b) => a + b, 0);
            return datos[mes].map((valor) => ((valor / total) * 100).toFixed(2));
        };

        // Inicializar gráfico
        const ctx = document.getElementById("sectorChart").getContext("2d");
        const sectorChart = new Chart(ctx, {
            type: "pie",
            data: {
                labels: categorias,
                datasets: [{
                    label: "Porcentaje de Registros",
                    data: calcularPorcentajes("Enero"), // Mostrar datos de Enero por defecto
                    backgroundColor: [
                        "#FF6384",
                        "#36A2EB",
                        "#FFCE56",
                        "#4BC0C0",
                    ],
                    hoverOffset: 4,
                }],
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: "top",
                    },
                    tooltip: {
                        callbacks: {
                            label: (context) => {
                                return `${context.label}: ${context.raw}%`;
                            },
                        },
                    },
                },
            },
        });

        // Cambiar datos según el mes
        function cambiarMes(mes) {
            sectorChart.data.datasets[0].data = calcularPorcentajes(mes);
            sectorChart.update();
        }

        // Agregar botones dinámicos para cambiar de mes
        const container = document.querySelector(".container");
        const botonesMeses = document.createElement("div");
        botonesMeses.style.textAlign = "center";
        botonesMeses.style.marginTop = "20px";

        meses.forEach((mes) => {
            const button = document.createElement("button");
            button.textContent = mes;
            button.style.margin = "5px";
            button.style.padding = "10px 20px";
            button.style.border = "none";
            button.style.backgroundColor = "#003366";
            button.style.color = "white";
            button.style.cursor = "pointer";
            button.style.borderRadius = "5px";

            button.addEventListener("click", () => cambiarMes(mes));
            botonesMeses.appendChild(button);
        });

        container.appendChild(botonesMeses);
    </script>
</body>

</html>
